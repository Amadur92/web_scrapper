<html class="" lang="ru"><head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><title>JavaScript. Профессиональная разработка веб-интерфейсов #25 / HTML Academy</title><script async="" crossorigin="anonymous" integrity="sha384-d/yhnowERvm+7eCU79T/bYjOiMmq4F11ElWYLmt0ktvYEVgqLDazh4+gW9CKMpYW" src="https://cdn.amplitude.com/libs/amplitude-5.2.2-min.gz.js" type="text/javascript"></script><script async="" src="https://www.google-analytics.com/plugins/ua/linkid.js" type="text/javascript"></script><script async="" src="https://mc.yandex.ru/metrika/tag.js"></script><script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript"></script><script async="" src="https://www.googletagmanager.com/gtm.js?id=GTM-W3ZS73J"></script><script>document.documentElement.classList.remove('no-js');</script><script data-project="10" data-sample-rate="0.25" data-sentry="a64ad1fd170847efa544b305c67696aa" data-version="2" src="https://assets.htmlacademy.ru/js/sentry.js"></script><link href="/static/css/octicons-3.3.0.min.css" rel="stylesheet"/><link href="https://assets.htmlacademy.ru/css/core.v197.css" rel="stylesheet"/><link href="https://assets.htmlacademy.ru/css/text.v77.css" rel="stylesheet"/><link href="https://assets.htmlacademy.ru/css/extended-ui-kit.v66.css" rel="stylesheet"/><link href="https://assets.htmlacademy.ru/css/up.v188.css" rel="stylesheet"/><link href="https://assets.htmlacademy.ru/css/blog.v137.css" rel="stylesheet"/><meta content="#2d2d44" name="theme-color"/><link color="#18213F" href="/meta/favicon.svg" rel="mask-icon"/><meta content="JavaScript. Профессиональная разработка веб-интерфейсов #25" name="application-name"/><meta content="JavaScript. Профессиональная разработка веб-интерфейсов #25" name="apple-mobile-web-app-title"/><link href="/meta/javascript-touch-icon.png" rel="apple-touch-icon"/><link href="/meta/javascript-favicon.ico" rel="shortcut icon" type="image/x-icon"/><link href="/meta/javascript.webmanifest" rel="manifest"/><link as="font" crossorigin="anonymous" href="https://assets.htmlacademy.ru/fonts/tt-norms-pro-400-normal.v2.woff2" rel="preload" type="font/woff2"/><link as="font" crossorigin="anonymous" href="https://assets.htmlacademy.ru/fonts/tt-norms-pro-500-normal.v2.woff2" rel="preload" type="font/woff2"/><link as="font" crossorigin="anonymous" href="https://assets.htmlacademy.ru/fonts/tt-norms-pro-700-normal.v2.woff2" rel="preload" type="font/woff2"/><link as="font" crossorigin="anonymous" href="https://assets.htmlacademy.ru/fonts/ubuntu-mono.woff2?cs=7882c41280d8256972fd2b8ee74e2d7d28a857b6" rel="preload" type="font/woff2"/><link as="script" href="https://assets.htmlacademy.ru/js/general.v223.js" rel="preload"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-W3ZS73J');</script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/b30983.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/b42759.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/c35c41.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/21aceb.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/7ea5a2.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/207ec5.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/17be68.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/a0cc69.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/5dcf46.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/69be84.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/24dc6b.js"></script><style>.hljs {display: block;color: black;}.hljs-keyword,.hljs-builtin-name,.hljs-selector-id {color: blue;}.hljs-subst,.hljs-attr {color: black;}.hljs-title,.hljs-type {color: #0000A2;}.hljs-literal {color: rgb(88,92,246);}.hljs-number {color: rgb(0,0,205);}.hljs-regexp,.hljs-string,.bash,.hljs-doctag,.hljs-selector-pseudo,.hljs-code {color: rgb(3,106,7);}.hljs-selector-class,.hljs-variable {color: rgb(49,132,149);}.hljs-selector-tag,.hljs-selector-attr,.hljs-link {color: rgb(197,6,11);}.hljs-attribute {color: rgb(109,121,222);}.hljs-comment,.hljs-quote {color: rgb(188,20,175);}.hljs-meta {color: rgb(104,104,91);}.hljs-tag {color: rgb(0,22,142);}.hljs-addition {background-color: rgba(155, 185, 85, 0.2);}.hljs-deletion {background-color: rgba(255, 0, 0, 0.2);}.hljs-params,.hljs-built_in {color: rgb(49, 132, 149);}</style><script charset="utf-8" src="https://assets.htmlacademy.ru/js/b10dac.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/8f4e02.js"></script><script charset="utf-8" src="https://assets.htmlacademy.ru/js/183270.js"></script></head><body><noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-W3ZS73J" style="display:none;visibility:hidden" width="0"></iframe></noscript><div class="page-content page-content--relative page-content--php page-content--up"><div class="blog-section blog-section--page blog-section--black-white"><div class="blog-section__wrap"><div class="side-menu__wrap"><div class="side-menu side-menu--main side-menu--php side-menu--up"><div class="side-menu__title"><a class="side-menu__link side-menu__link--main link" href="/javascript/25/book">Учебник</a><button class="side-menu__button" type="button"><span class="sr-only">Развернуть / Свернуть</span><svg aria-hidden="true" height="16" width="8"><use xlink:href="/img/sprites/up.v9.svg#icon-arrow-right"></use></svg></button></div><ul class="side-menu__list"><li class="side-menu__item"><button class="side-menu__toggle" type="button"><span class="sr-only">Развернуть / Свернуть</span></button><a class="link" href="/javascript/25/book/1">1. Введение в JavaScript</a><ul class="side-menu__inner-list"><li class="side-menu__inner-item"><a href="/javascript/25/book/1.1">1.1. Что такое JavaScript</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/1.2">1.2. Спецификация</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/1.3">1.3. Синтаксис</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/1.4">1.4. Подключение JavaScript к странице</a><ul class="side-menu__inner-list side-menu__inner-list--second"><li class="side-menu__inner-item"><a href="/javascript/25/book/1.4.1">1.4.1. Атрибуты defer и async</a></li></ul></li></ul></li><li class="side-menu__item"><button class="side-menu__toggle" type="button"><span class="sr-only">Развернуть / Свернуть</span></button><a class="link" href="/javascript/25/book/2">2. Основы JavaScript</a><ul class="side-menu__inner-list"><li class="side-menu__inner-item"><a href="/javascript/25/book/2.1">2.1. Переменные</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/2.2">2.2. Именование переменных и функций</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/2.3">2.3. Типы данных в JavaScript</a><ul class="side-menu__inner-list side-menu__inner-list--second"><li class="side-menu__inner-item"><a href="/javascript/25/book/2.3.1">2.3.1. Примитивы</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/2.3.2">2.3.2. Объектные типы данных</a></li></ul></li><li class="side-menu__inner-item"><a href="/javascript/25/book/2.4">2.4. Сравнение сложных типов данных</a><ul class="side-menu__inner-list side-menu__inner-list--second"><li class="side-menu__inner-item"><a href="/javascript/25/book/2.4.1">2.4.1. Динамическое приведение типов</a></li></ul></li><li class="side-menu__inner-item"><a href="/javascript/25/book/2.5">2.5. Комментарии в коде</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/2.6">2.6. Точка с запятой</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/2.7">2.7. Функции</a><ul class="side-menu__inner-list side-menu__inner-list--second"><li class="side-menu__inner-item"><a href="/javascript/25/book/2.7.1">2.7.1. rest-параметры функций</a></li></ul></li><li class="side-menu__inner-item"><a href="/javascript/25/book/2.8">2.8. Стрелочные функции</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/2.9">2.9. Оператор switch</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/2.10">2.10. Тернарный оператор</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/2.11">2.11. Строгий режим</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/2.12">2.12. Контекст функций и проблема потери окружения</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/2.13">2.13. Функции-конструкторы</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/2.14">2.14. Введение в прототипы</a></li></ul></li><li class="side-menu__item"><button class="side-menu__toggle" type="button"><span class="sr-only">Развернуть / Свернуть</span></button><a class="link" href="/javascript/25/book/3">3. Массивы и объекты</a><ul class="side-menu__inner-list"><li class="side-menu__inner-item"><a href="/javascript/25/book/3.1">3.1. Массивы и их методы</a><ul class="side-menu__inner-list side-menu__inner-list--second"><li class="side-menu__inner-item"><a href="/javascript/25/book/3.1.1">3.1.1. Склейка элементов массива</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/3.1.2">3.1.2. Объединение массивов в один новый</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/3.1.3">3.1.3. Копирование массива или его части</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/3.1.4">3.1.4. Расположение элементов массива в обратном порядке</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/3.1.5">3.1.5. Поиск элементов в массиве</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/3.1.6">3.1.6. Перебор массива</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/3.1.7">3.1.7. Преобразование массива</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/3.1.8">3.1.8. Свёртка массива</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/3.1.9">3.1.9. Проверка каждого элемента массива на условие «удовлетворяют все»</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/3.1.10">3.1.10. Проверка каждого элемента массива на условие «удовлетворяет хоть один»</a></li></ul></li><li class="side-menu__inner-item"><a href="/javascript/25/book/3.2">3.2. spread-синтаксис</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/3.3">3.3. Отличия spread-синтаксиса от rest-параметров</a></li></ul></li><li class="side-menu__item"><button class="side-menu__toggle" type="button"><span class="sr-only">Развернуть / Свернуть</span></button><a class="link" href="/javascript/25/book/4">4. DOM</a><ul class="side-menu__inner-list"><li class="side-menu__inner-item"><a href="/javascript/25/book/4.1">4.1. Что такое DOM</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/4.2">4.2. DOM-дерево</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/4.3">4.3. Поиск в деревьях</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/4.4">4.4. Живые и неживые коллекции в JavaScript</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/4.5">4.5. DOM и разметка</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/4.6">4.6. Шаблоны и данные</a></li></ul></li><li class="side-menu__item"><button class="side-menu__toggle" type="button"><span class="sr-only">Развернуть / Свернуть</span></button><a class="link" href="/javascript/25/book/5">5. Асинхронность и события</a><ul class="side-menu__inner-list"><li class="side-menu__inner-item"><a href="/javascript/25/book/5.1">5.1. Синхронные и асинхронные операции</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/5.2">5.2. Функции обратного вызова (колбэки)</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/5.3">5.3. Функции обратного вызова на практике</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/5.4">5.4. Действия браузера по умолчанию</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/5.5">5.5. Фазы событий</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/5.6">5.6. Делегирование событий</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/5.7">5.7. Пропуск кадров и устранение дребезга</a></li></ul></li><li class="side-menu__item"><button class="side-menu__toggle" type="button"><span class="sr-only">Развернуть / Свернуть</span></button><a class="link" href="/javascript/25/book/6">6. Модули</a><ul class="side-menu__inner-list"><li class="side-menu__inner-item"><a href="/javascript/25/book/6.1">6.1. Области видимости переменных и функций</a><ul class="side-menu__inner-list side-menu__inner-list--second"><li class="side-menu__inner-item"><a href="/javascript/25/book/6.1.1">6.1.1. Глобальная и блочная области видимости</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/6.1.2">6.1.2. Модульная область видимости, лексическое окружение и прочие нюансы</a></li></ul></li><li class="side-menu__inner-item"><a href="/javascript/25/book/6.2">6.2. Введение в ECMAScript-модули</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/6.3">6.3. Экспорт и импорт</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/6.4">6.4. Экспорт и импорт, продвинутые техники</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/6.5">6.5. Пути импорта</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/6.6">6.6. Понятие API</a></li></ul></li><li class="side-menu__item side-menu__item--active"><button class="side-menu__toggle" type="button"><span class="sr-only">Развернуть / Свернуть</span></button><a class="link" href="/javascript/25/book/7">7. Работа с сетью</a><ul class="side-menu__inner-list"><li class="side-menu__inner-item"><a href="/javascript/25/book/7.1">7.1. Промисы</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/7.2">7.2. Цепочки промисов</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/7.3">7.3. Методы глобального объекта Promise</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/7.4">7.4. Async/Await</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/7.5">7.5. Протокол HTTP</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/7.6">7.6. Практика выполнения HTTP-запросов</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/7.7">7.7. JSON</a></li><li class="side-menu__inner-item side-menu__inner-item--current"><a href="/javascript/25/book/7.8">7.8. Fetch API</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/7.9">7.9. Безопасность. XSS (Cross-site-scripting)</a></li></ul></li><li class="side-menu__item"><button class="side-menu__toggle" type="button"><span class="sr-only">Развернуть / Свернуть</span></button><a class="link" href="/javascript/25/book/8">8. DevTools (инструменты разработчика в браузере)</a><ul class="side-menu__inner-list"><li class="side-menu__inner-item"><a href="/javascript/25/book/8.1">8.1. Знакомство с DevTools</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/8.2">8.2. Вкладка Console</a><ul class="side-menu__inner-list side-menu__inner-list--second"><li class="side-menu__inner-item"><a href="/javascript/25/book/8.2.1">8.2.1. Как сообщения попадают в консоль</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/8.2.2">8.2.2. Консоль удобна для проверки гипотез</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/8.2.3">8.2.3. Почему опасно выполнять незнакомый код в консоли</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/8.2.4">8.2.4. Опция «Preserve log»</a></li></ul></li><li class="side-menu__inner-item"><a href="/javascript/25/book/8.3">8.3. Вкладка Elements</a><ul class="side-menu__inner-list side-menu__inner-list--second"><li class="side-menu__inner-item"><a href="/javascript/25/book/8.3.1">8.3.1. Обзор вкладки Elements</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/8.3.2">8.3.2. Как посмотреть обработчики на элементе</a></li></ul></li><li class="side-menu__inner-item"><a href="/javascript/25/book/8.4">8.4. Вкладка Sources</a><ul class="side-menu__inner-list side-menu__inner-list--second"><li class="side-menu__inner-item"><a href="/javascript/25/book/8.4.1">8.4.1. Обзор панелей вкладки Sources</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/8.4.2">8.4.2. Точки останова</a></li></ul></li><li class="side-menu__inner-item"><a href="/javascript/25/book/8.5">8.5. Вкладка Network</a><ul class="side-menu__inner-list side-menu__inner-list--second"><li class="side-menu__inner-item"><a href="/javascript/25/book/8.5.1">8.5.1. Обзор вкладки Network</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/8.5.2">8.5.2. Опции Preserve log и Disable cache</a></li></ul></li></ul></li><li class="side-menu__item"><button class="side-menu__toggle" type="button"><span class="sr-only">Развернуть / Свернуть</span></button><a class="link" href="/javascript/25/book/9">9. Рабочие инструменты</a><ul class="side-menu__inner-list"><li class="side-menu__inner-item"><a href="/javascript/25/book/9.1">9.1. Node.js и npm</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/9.2">9.2. Линтер ESLint</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/9.3">9.3. Локальный сервер Browsersync</a></li></ul></li><li class="side-menu__item"><button class="side-menu__toggle" type="button"><span class="sr-only">Развернуть / Свернуть</span></button><a class="link" href="/javascript/25/book/10">10. Git и GitHub</a><ul class="side-menu__inner-list"><li class="side-menu__inner-item"><a href="/javascript/25/book/10.1">10.1. Система контроля версий Git</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/10.2">10.2. GitHub</a><ul class="side-menu__inner-list side-menu__inner-list--second"><li class="side-menu__inner-item"><a href="/javascript/25/book/10.2.1">10.2.1. Регистрация на GitHub</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/10.2.2">10.2.2. Работа с репозиториями</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/10.2.3">10.2.3. Code review</a></li></ul></li><li class="side-menu__inner-item"><a href="/javascript/25/book/10.3">10.3. Терминал</a><ul class="side-menu__inner-list side-menu__inner-list--second"><li class="side-menu__inner-item"><a href="/javascript/25/book/10.3.1">10.3.1. Начало работы с Git в терминале</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/10.3.2">10.3.2. Установка SSH-ключей</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/10.3.3">10.3.3. Клонирование репозитория</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/10.3.4">10.3.4. Работа с ветками</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/10.3.5">10.3.5. Запись изменений в репозиторий</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/10.3.6">10.3.6. Синхронизация репозиториев</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/10.3.7">10.3.7. Конфликты</a></li><li class="side-menu__inner-item"><a href="/javascript/25/book/10.3.8">10.3.8. Операции отмены</a></li></ul></li></ul></li></ul></div></div><div class="blog-section__content"><div class="blog-section__wrap-inner"><div class="post-info post-info--up"><p class="post-info__head"><span class="post-info__type">Теория</span><span class="post-info__timer">~ 9 минут</span></p><h2 class="post-info__title">Глава 7.8. Fetch API</h2></div><div class="post-content"><p>Fetch API — современный, гибкий и универсальный способ для отправки запросов к серверу. Мы говорим Fetch API, но по факту подразумеваем функцию <code>fetch()</code>, с помощью которой можно получать и отправлять произвольные данные на сервер.</p><details><summary>А что было до <code>fetch()</code>?</summary><p>Для отправки запросов к серверу браузеры долгое время предоставляли лишь один способ — объект <a href="https://developer.mozilla.org/ru/docs/Web/API/XMLHttpRequest"><code>XMLHttpRequest</code></a>. В своё время Microsoft сделала прорыв с этой технологией, и позже <code>XMLHttpRequest</code> был стандартизирован WHATWG.</p><p>С тех пор прошло много времени, и требования к этой, на первый взгляд, несложной задаче изменились. Объектом <code>XMLHttpRequest</code> пользоваться стало неудобно. Отсутствие поддержки промисов, не совсем очевидный интерфейс и так далее. Это не говорит о том, что <code>XMLHttpRequest</code> работает плохо и не годится для взаимодействия с сервером. Вовсе нет. Это по-прежнему рабочий инструмент, но сегодня браузеры предлагают новое, улучшенное API для выполнения запросов — Fetch API.</p></details><h2 id="sintaksis">Синтаксис</h2><p>Начнём знакомство с <code>fetch()</code> с рассмотрения интерфейса. Функция принимает два параметра: адрес ресурса, на который требуется отправить запрос, и объект с настройками. Второй параметр опционален и может не использоваться:</p><pre class="js language-js"><code class="hljs javascript">fetch(адрес[, настройки]);
</code></pre><p>Результатом выполнения <code>fetch()</code> станет промис. За счёт поддержки промисов, обрабатывать результат выполнения <code>fetch()</code> становится гораздо удобней. Попробуем проверить на реальном примере. Запросим информацию о публикациях <a href="https://jsonplaceholder.typicode.com/">у тестового сервера JSONPlaceholder</a> с помощью <code>fetch()</code>:</p><pre class="js language-js"><code class="hljs javascript">fetch(<span class="hljs-string">'https://jsonplaceholder.typicode.com/posts'</span>)
  .then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.json())
  .then(<span class="hljs-function">(<span class="hljs-params">posts</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(posts));
</code></pre><p>Этот простой пример демонстрирует выполнение <code>GET</code>-запроса для получения данных (список публикаций) в JSON. Первым аргументом <code>fetch()</code> мы передали адрес ресурса. Второй аргумент не задали, так как для выполнения <code>GET</code>-запроса дополнительные настройки не требуются. По умолчанию <code>fetch()</code> выполнит именно <code>GET</code>-запрос.</p><p>Раз <code>fetch()</code> возвращает промис, мы получаем возможность использовать знакомые методы <code>then</code>, <code>catch</code> и <code>finally</code>. В случае успешного завершения промиса мы получим от сервера объект с ответом. Само собой не в текстовом виде, а в структурированном. Объект позволит понять состояние ответа и получить не только данные из тела ответа, но и при необходимости служебную информацию. Например, заголовки, установленные сервером.</p><blockquote><p><strong>Ещё раз,</strong><code>fetch()</code> не привносит магии — взаимодействие с сервером по-прежнему происходит в асинхронном режиме. Это означает, что запрос выполнится не мгновенно, а данные мы получим не сразу. Результатом выполнения <code>fetch()</code> будет промис в состоянии <em>выполняется</em>.</p></blockquote><p>В представленном примере нас интересуют только данные. Результат выполнения <code>fetch()</code> — ответ от сервера — попадёт в параметр <code>response</code><em>(это специальный объект ответа, о нём будет дальше)</em>. Нам заранее известно, что сервер вернёт информацию о публикациях в JSON. Поэтому мы не делаем дополнительных проверок, а сразу пытаемся прочитать JSON, для этого используем метод <code>json()</code> у объекта с ответом:</p><pre class="js language-js"><code class="hljs javascript">.then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.json())
</code></pre><p>Встроенный метод <code>json()</code> автоматически извлечёт JSON-данные из ответа, преобразует их в объект или массив, чтобы с данными можно было работать в JavaScript, и вернёт новый промис. А раз результатом станет промис, то можно продолжать цепочку <code>then</code> и вывести данные в консоль:</p><pre class="js language-js"><code class="hljs javascript">.then(<span class="hljs-function">(<span class="hljs-params">posts</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(posts));
</code></pre><p>Попробуйте скопировать код целикового примера и выполнить на этой странице в консоли браузера. Спустя какое-то время в консоли появится список публикаций.</p><p></p><figure><img alt="Рисунок 1. Результат выполнения fetch" src="C:/Users/ivy-m/PycharmProjects/scrapper/scrapper2/results//assets/intensives/javascript/25/book/07-network/08-fetch/01-fetch.png" title="Рисунок 1. Результат выполнения fetch"/><figcaption>Рисунок 1. Результат выполнения fetch</figcaption></figure><p></p><h2 id="obekt-otveta-(response)">Объект ответа (<code>Response</code>)</h2><p>Объект ответа (<code>Response</code>) мы получаем при завершении промиса. В этом объекте хранится вся информация об ответе сервера: заголовки, статусы, результат выполнения запроса и другая служебная информация.</p><h3 id="obekt-otveta-—-ne-vsegda-dannie">Объект ответа — не всегда данные</h3><p>Сервер может исполнить не все запросы. Самая банальная ситуация: запрашиваемый ресурс не найден. Это может случиться по разным причинам: ресурс был, но потом его перенесли в другое место или в адресе была допущена ошибка. На такой запрос сервер ответит кодом <code>404</code>.</p><p>Возникает вопрос: «А как понять статус выполнения запроса?» Ведь если сервер вернул <code>404</code>, то нет никакого смысла пытаться извлечь JSON. Данных ведь нет. При этом промис не будет завершён с ошибкой, ведь сервер ответил, а значит перехватить такую ситуацию с помощью <code>catch</code> не получится.</p><p>Определить успешность выполнения запроса поможет свойство объекта ответа <code>ok</code>. Оно содержит булево значение. Если запрос выполнен успешно, <code>ok</code> будет <code>true</code>. В противном случае <code>false</code>.</p><p>Звучит не сложно, но возникает другой вопрос: «А что подразумевается под успехом выполнения?» Успех определяется на основании кода ответа сервера на запрос. Если код ответа в диапазоне чисел <code>200-299</code>, значит он выполнился успешно. Ответы с кодами, которые не попадают в диапазон, означают выполнение запроса с ошибкой.</p><p>Немного доработаем пример получения списка публикаций. Добавим в него проверку успешности выполнения запроса:</p><pre class="js language-js"><code class="hljs javascript"><span class="hljs-comment">// Для проверки обработки ошибки изменим часть адреса,</span>
<span class="hljs-comment">// заведомо указав несуществующий адрес /posts1</span>
fetch(<span class="hljs-string">'https://jsonplaceholder.typicode.com/posts1'</span>)
  .then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (response.ok) {
      <span class="hljs-keyword">return</span> response;
    }

    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`<span class="hljs-subst">${response.status}</span> — <span class="hljs-subst">${response.statusText}</span>`</span>);
  })
  .then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.json())
  .then(<span class="hljs-function">(<span class="hljs-params">posts</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(posts))
  .catch(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(error));
</code></pre><p>Код примера немного подрос, но мы не потеряли в читабельности. В первом <code>then</code> выполняется проверка свойства <code>ok</code>. Если оно равно <code>true</code>, значит серверу есть, чем ответить. Можно возвращать объект ответа и продолжать конвейер обработки (обработать JSON и так далее).</p><p>Если значение <code>ok</code> равно <code>false</code>, серверу нечем ответить, разумным решением в такой ситуации станет формирование объекта с ошибкой. Для этого бросим исключение с <code>Error</code>. Аргументами передадим значения свойств объекта ответа <code>status</code> (код ответа сервера) и <code>statusText</code> (пояснительная строка).</p><p>Как только будет брошено исключение, оно переведёт промис в состояние <em>завершён с ошибкой</em>, и мы сможем перехватить его в <code>catch</code>, чтобы вывести в консоль содержимое ошибки.</p><p></p><figure><img alt="Рисунок 2. Обработка ошибки" src="C:/Users/ivy-m/PycharmProjects/scrapper/scrapper2/results//assets/intensives/javascript/25/book/07-network/08-fetch/02-fetch-catch.png" title="Рисунок 2. Обработка ошибки"/><figcaption>Рисунок 2. Обработка ошибки</figcaption></figure><p></p><details><summary>А что с другими ошибками?</summary><p>Если ошибку вернул не сервер, а, например, в момент запроса пропал интернет, в такой ситуации промис, возвращаемый <code>fetch()</code>, будет завершён с ошибкой. Следовательно, обработать такую ситуацию можно в методе <code>catch</code>. Поэтому не забывайте добавлять его в конце цепочки <code>then</code>!</p></details><h2 id="otpravka-informatsii-na-server">Отправка информации на сервер</h2><p>Работа с <code>fetch()</code> не ограничивается лишь получением данных от сервера. Ничего не мешает их передавать на сервер. Эта задача не сильно сложней, но придётся задействовать второй аргумент <code>fetch()</code> — объект с настройками.</p><p>Попробуем подготовить и отправить запрос методом <code>POST</code> (речь о методе в контексте протокола HTTP):</p><pre class="js language-js"><code class="hljs javascript"><span class="hljs-comment">// Данные для отправки</span>
<span class="hljs-keyword">const</span> post = {
  <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">userId</span>: <span class="hljs-number">31337</span>,
  <span class="hljs-attr">title</span>: <span class="hljs-string">'Fetch API'</span>,
  <span class="hljs-attr">body</span>: <span class="hljs-string">'Fetch API — современный, гибкий и универсальный способ для отправки запросов к серверу...'</span>,
};

<span class="hljs-comment">// Вторым аргументом передадим объект с настройками.</span>
<span class="hljs-comment">// Определим в нём метод, заголовки и тело запроса</span>
fetch(
  <span class="hljs-string">'https://jsonplaceholder.typicode.com/posts'</span>,
  {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
    },
    <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify(post),
  })
  .then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.json())
  .then(<span class="hljs-function">(<span class="hljs-params">json</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(json));
</code></pre><p></p><figure><img alt="Рисунок 4. Результат отправки данных методом POST" src="C:/Users/ivy-m/PycharmProjects/scrapper/scrapper2/results//assets/intensives/javascript/25/book/07-network/08-fetch/03-post.png" title="Рисунок 4. Результат отправки данных методом POST"/><figcaption>Рисунок 4. Результат отправки данных методом POST</figcaption></figure><p></p><p>В этом примере кода задействован второй аргумент <code>fetch()</code>. С его помощью мы передаём объект с настройками, где переопределяем HTTP-метод (по умолчанию <code>GET</code>, а нам нужен <code>POST</code>).</p><p>При подготовке запроса нам доступна возможность установить произвольные заголовки. Для этого в объекте с настройками предусмотрено свойство <code>headers</code>. Это обычный объект, где каждая пара ключ-значение описывает заголовок. В приведённом примере определяем один заголовок — <code>Content-Type</code> (тип содержимого). Данные передаются в формате JSON, ему соответствует тип <code>application/json</code>. Другие заголовки добавляются аналогичным образом. Например, если потребуется добавить заголовок <code>User-Agent</code>, то достаточно описать ещё одну пару ключ-значение:</p><pre class="js language-js"><code class="hljs javascript">headers: {
  <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
  <span class="hljs-string">'User-Agent'</span>: <span class="hljs-string">'Google Chrome'</span>
},
</code></pre><p>Тело запроса фиксируется в свойстве <code>body</code>. Мы планируем отправить данные в JSON, поэтому сразу превращаем подготовленный объект с данными в JSON с помощью <code>JSON.stringify()</code>. Дальше всё повторяется: пишем код для обработки ответа, возможной ошибки и т. д.</p><h2 id="rezyume">Резюме</h2><p><code>fetch()</code> — это современный способ отправки запросов с клиента к серверу. В простых случаях можно обойтись буквально одной строчкой кода, а за счёт поддержки промисов обработка ответов также упрощается и превращается в последовательную цепочку.</p><div class="post-content__wrapper"><div class="card card--rating card--rating-embedded" data-rating="" data-rating-comment=""><h3 class="card__header">Поделитесь, как вам глава?</h3><div class="card__content"><form action="/javascript/25/book/7.8/mark" class="card-rating" method="POST"><div class="card-rating__values"><input class="sr-only" id="book-rating-5" name="value" type="radio" value="5"/><label for="book-rating-5"><span class="sr-only">Глава — огонь!</span><svg aria-hidden="true" height="16" width="16"><use xlink:href="/img/sprites/octicons.v10.svg#star-fill-16"></use></svg></label><input class="sr-only" id="book-rating-4" name="value" type="radio" value="4"/><label for="book-rating-4"><span class="sr-only">Это было полезно</span><svg aria-hidden="true" height="16" width="16"><use xlink:href="/img/sprites/octicons.v10.svg#star-fill-16"></use></svg></label><input class="sr-only" id="book-rating-3" name="value" type="radio" value="3"/><label for="book-rating-3"><span class="sr-only">Неплохо, но можно лучше</span><svg aria-hidden="true" height="16" width="16"><use xlink:href="/img/sprites/octicons.v10.svg#star-fill-16"></use></svg></label><input class="sr-only" id="book-rating-2" name="value" type="radio" value="2"/><label for="book-rating-2"><span class="sr-only">Ничего полезного не было</span><svg aria-hidden="true" height="16" width="16"><use xlink:href="/img/sprites/octicons.v10.svg#star-fill-16"></use></svg></label><input class="sr-only" id="book-rating-1" name="value" type="radio" value="1"/><label for="book-rating-1"><span class="sr-only">Я напишу эту главу лучше</span><svg aria-hidden="true" height="16" width="16"><use xlink:href="/img/sprites/octicons.v10.svg#star-fill-16"></use></svg></label></div><p class="card-rating__title">Оцените главу</p><div class="card-rating__evaluate hidden"><span class="card-rating__text"></span></div><div class="card-rating__comment hidden"><label class="sr-only" for="book-rating-comment">Комментарий</label><div class="form__group"><textarea class="field field--area field--full-width" cols="40" id="book-rating-comment" name="comment" placeholder="Оставьте ваш комментарий." rows="2"></textarea><p class="form__notice form__notice--red hidden">Пожалуйста, оставьте комментарий.</p></div><button class="button button--small" type="submit">Отправить</button></div></form><p class="alert alert--green alert--full-width text-right hidden" data-rating-finish="" style="margin-top:10px;">Спасибо!</p></div></div><a class="button button--green" href="/javascript/25/book/7.8/complete">Продолжить</a></div></div><div class="card card--orphus"><div class="card__content"><p><svg aria-hidden="true" height="16" width="16"><use xlink:href="/img/sprites/octicons.v10.svg#shield-16"></use></svg> Если вы обнаружили ошибку или неработающую ссылку, выделите ее и нажмите Ctrl + Enter</p></div></div></div></div></div></div></div> <script id="" type="text/javascript">(function(a,e,f,g,b,c,d){a[b]=a[b]||function(){(a[b].a=a[b].a||[]).push(arguments)};a[b].l=1*new Date;c=e.createElement(f);d=e.getElementsByTagName(f)[0];c.async=1;c.src=g;d.parentNode.insertBefore(c,d)})(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym");ym(51609551,"init",{id:51609551,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0});</script> <noscript><div><img alt="" src="https://mc.yandex.ru/watch/51609551" style="position:absolute; left:-9999px;"/></div></noscript> <div class="modal" data-item="0"><div class="modal__inner"><div class="modal__wrapper js-tutor-info hidden"><button class="modal__close icon-close" data-modal="close" title="Закрыть" type="button"></button><h3 class="modal__header text-left">Мой наставник</h3><p>Для полноценного прохождения курса вам нужно выбрать наставника.</p><p>После выбора вы сможете всегда держать под рукой его контакты (почту и ссылки на профиль в соцсетях, которые
      он укажет для связи со своими студентами), а также расписание консультаций.</p><p>Вы в любой момент можете поменять наставника, если вам кажется, что с текущим наладить работу не получается.</p></div><div class="modal__wrapper js-projects-info hidden"><button class="modal__close icon-close" data-modal="close" title="Закрыть" type="button"></button><h3 class="modal__header text-left">Мои проекты</h3><p>Для удобства работы с проектами, мы собрали их в этом блоке.</p><p>Основной личный проект, который вы будете готовить к финальной защите, находится в начале списка и рядом с ним
      стоит иконка <span class="up-icon"><svg aria-hidden="true" height="24" width="24"><use xlink:href="/img/sprites/octicons.v10.svg#heart-24"></use></svg></span>. Если на курсе
      используется учебный проект, то он будет следующим и с иконкой <span class="up-icon"><svg aria-hidden="true" height="24" width="24"><use xlink:href="/img/sprites/octicons.v10.svg#mortar-board-24"></use></svg></span>. Далее будут идти все остальные проекты, если
      для них были созданы репозитории.</p><p>Вы можете выбрать, какой именно проект будет основным, в любой момент прохождения курса, но мы советуем
      определиться с выбором как можно скорее.</p></div><div class="modal__wrapper js-tutor-task-value hidden"><button class="modal__close icon-close" data-modal="close" title="Закрыть" type="button"></button><h3 class="modal__header text-left">Оцените наставника</h3><p>Мы всегда стремимся улучшать качество услуг. И нам важно знать, как идёт ваша работа с наставником.</p><p>Уделите пару секунд вашего времени и дайте нам знать, как обстоят дела.</p><p>Также вы всегда можете задать свои вопросы напрямую <a href="/javascript/25/curator">куратору</a>.</p></div><div class="modal__wrapper js-first-todo hidden"><button class="modal__close icon-close" data-modal="close" title="Закрыть" type="button"></button><h3 class="modal__header text-left">Ваши первые задачи</h3><p>В этом списке мы собрали задачи, с которых начинается обучение на курсе.</p><p>Выполняйте задачи по порядку, а система будет автоматически отмечать галочками ваш прогресс. Когда весь список
      будет выполнен, этот блок закроется и больше не будет вам надоедать.</p></div><div class="modal__wrapper js-add-tutor-resource-request hidden modal--application-consultation"><button class="modal__close icon-close" data-modal="close" title="Закрыть" type="button"></button><h4 class="modal__header text-left">Запись на консультацию</h4><form action="/javascript/25/requests/create" class="consultation-form form" method="post" novalidate=""><div class="form__group radio-button-group"><label class="radio-button"><input checked="" class="radio-button__input" data-type="voice" name="consultation-type" type="radio" value="voice"/><span class="radio-button__text"><svg aria-hidden="true" height="16" width="16"><use xlink:href="/img/sprites/octicons.v10.svg#megaphone-16"></use></svg>
                  Голосовая</span></label><label class="radio-button"><input class="radio-button__input" data-type="text" name="consultation-type" type="radio" value="text"/><span class="radio-button__text"><svg aria-hidden="true" height="16" width="16"><use xlink:href="/img/sprites/octicons.v10.svg#pencil-16"></use></svg>
                  Текстовая</span></label><label class="radio-button"><input class="radio-button__input" data-type="review" name="consultation-type" type="radio" value="code-review"/><span class="radio-button__text"><svg aria-hidden="true" height="16" width="16"><use xlink:href="/img/sprites/octicons.v10.svg#code-review-16"></use></svg>
                  Кодревью</span></label></div><p class="form__text" data-type-content="voice"><b>Голосовая консультация</b> — это живое общение с наставником, который ответит на интересующие вас вопросы.</p><p class="form__text hidden" data-type-content="text"><b>Текстовая консультация</b> — это общение с наставником в чате. Чат доступен 1 день с момента начала консультации.</p><p class="form__text hidden" data-type-content="review"><b>Кодревью</b> — это проверка пулреквеста в репозитории вашего проекта. Наставник оставит комментарии к вашему коду.</p><div class="form__group" data-type-content="voice"><label class="form__label" for="voice-comment">Комментарий</label><div class="form__group-fields"><textarea class="field field--area field--full-width" cols="40" id="voice-comment" name="voice-comment" placeholder="Обсудить как строить сетки на гридах." rows="4"></textarea></div></div><div class="form__group hidden" data-type-content="text"><label class="form__label" for="text-comment">Список вопросов наставнику</label><div class="form__group-fields"><textarea class="field field--area field--full-width" cols="40" id="text-comment" name="text-comment" placeholder="Как строить сетки на гридах? Как правильно доступно скрыть блок?" rows="4"></textarea></div></div><div class="form__group hidden" data-type-content="review"><label class="form__label" for="pr_url">Ссылка на пулреквест</label><div class="form__group-fields"><input class="field field--text field--full-width" id="pr_url" name="pr_url" pattern="^https:\/\/github.com\/htmlacademy-javascript\/97687.+\/pull\/\d+" placeholder="https://github.com/htmlacademy-javascript/97687.../pull/.." required="" type="url" value=""/><p class="form__notice form__notice--red hidden"></p></div></div><div class="form__group hidden" data-type-content="review"><label class="form__label" for="code-review-comment">На что обратить внимание</label><div class="form__group-fields"><textarea class="field field--area field--full-width" cols="40" id="code-review-comment" name="code-review-comment" placeholder="Обратить внимание на строчку 20" rows="4"></textarea></div></div><button class="button button--full-width" type="submit">
        Записаться
    </button></form></div><div class="modal__wrapper js-orphus hidden" data-class-mod="modal--orphus"><button class="modal__close icon-close" data-modal="close" title="Закрыть" type="button"></button><h4 class="modal__header">Нашли опечатку?</h4><form action="/api/orphus" class="modal__form form"><input name="token" type="hidden" value="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpbnRlbnNpdmUiOiIyMDkiLCJ1c2VyIjoiOTc2ODciLCJ1cmwiOiJodHRwczpcL1wvdXAuaHRtbGFjYWRlbXkucnVcL2phdmFzY3JpcHRcLzI1XC9ib29rXC83LjgifQ.AG6wNJcTeBp8SmFV2IahQkuGmlHyh2DRtWD4l53SZIs"/><div class="form__group"><div class="form__group-fields"><textarea class="field field--area field--full-width" cols="40" id="comment" name="comment" placeholder="Необязательно" rows="4"></textarea></div></div><button class="button button--full-width modal__button" type="submit">
        Отправить
    </button></form></div></div></div><script src="https://assets.htmlacademy.ru/js/up.v161.js"></script><script async="" data-assets="https://assets.htmlacademy.ru" data-require="toggle,tabs,tab-switcher,modal,ajax,autocomplete,orphus,newsfeed-messages,highlight,side-menu,github-embed,modal,form,tabs" src="https://assets.htmlacademy.ru/js/general.v223.js"></script><script async="" src="/static/js/scripts.13.js"></script><script src="https://assets.htmlacademy.ru/js/blog.v105.js"></script><script id="" type="text/javascript">(function(e,a){function f(b,a){b.prototype[a]=function(){this._q.push([a].concat(Array.prototype.slice.call(arguments,0)));return this}}function g(b){function a(a){b[a]=function(){b._q.push([a].concat(Array.prototype.slice.call(arguments,0)))}}for(var c=0;c<h.length;c++)a(h[c])}var c=e.amplitude||{_q:[],_iq:{}},b=a.createElement("script");b.type="text/javascript";b.integrity="sha384-d/yhnowERvm+7eCU79T/bYjOiMmq4F11ElWYLmt0ktvYEVgqLDazh4+gW9CKMpYW";b.crossOrigin="anonymous";b.async=!0;b.src="https://cdn.amplitude.com/libs/amplitude-5.2.2-min.gz.js";
b.onload=function(){e.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK")};a=a.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a);b=function(){this._q=[];return this};a="add append clearAll prepend set setOnce unset".split(" ");for(var d=0;d<a.length;d++)f(b,a[d]);c.Identify=b;b=function(){this._q=[];return this};a=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"];for(d=0;d<a.length;d++)f(b,a[d]);c.Revenue=b;var h="init logEvent logRevenue setUserId setUserProperties setOptOut setVersionName setDomain setDeviceId setGlobalUserProperties identify clearUserProperties setGroup logRevenueV2 regenerateDeviceId groupIdentify onInit logEventWithTimestamp logEventWithGroups setSessionId resetSessionId".split(" ");
g(c);c.getInstance=function(a){a=(a&&0!==a.length?a:"$default_instance").toLowerCase();c._iq.hasOwnProperty(a)||(c._iq[a]={_q:[]},g(c._iq[a]));return c._iq[a]};e.amplitude=c})(window,document);amplitude.getInstance().init("f602c01f1c06db4f52768e6adaa4eb56",google_tag_manager["GTM-W3ZS73J"].macro(4),{includeUtm:!0,includeGclid:!0,includeReferrer:!0,deviceIdFromUrlParam:!0},function(e){window.amplitudeLoaded=!0});</script><script id="" type="text/javascript">var eventProperties={};eventProperties.origin=google_tag_manager["GTM-W3ZS73J"].macro(5);eventProperties.domain=google_tag_manager["GTM-W3ZS73J"].macro(6);amplitude.getInstance().logEvent("user.visit",eventProperties);</script></body></html>